// Este é o provider do nosso banco de dados
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // Lê a URL de conexão do arquivo .env
}

// Bloco do gerador de cliente (ADICIONE ESTE BLOCO)
generator client {
  provider = "prisma-client-js"
}

// Dentro do backend/schema.prisma

model Usuario {
  id              Int       @id @default(autoincrement())
  nome            String
  numero_registro String    @unique
  email           String    @unique
  senha           String
  
  // ADICIONE ESTA LINHA PARA A RELAÇÃO INVERSA
  projetos        Projeto[]
}

model Montador {
  // ... seu modelo Montador continua igual ...
  id              Int      @id @default(autoincrement())
  nome            String
  numero_registro String   @unique
  projetos        Projeto[]
}

model Projeto {
  id              Int       @id @default(autoincrement())
  codigo_projeto  String
  nome_empresa    String
  status          String
  descricao       String?
  data_cadastro   DateTime
  data_entrega    DateTime?

  // --- ADICIONE ESTAS DUAS LINHAS PARA GUARDAR O CRIADOR ---
  criadoPorId     Int
  criadoPor       Usuario   @relation(fields: [criadoPorId], references: [id])
  // -----------------------------------------------------------

  montadorId      Int
  montador        Montador  @relation(fields: [montadorId], references: [id])
}